"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webpackNumbers=t():e.webpackNumbers=t()}(self,(()=>(self.webpackChunkwebpackNumbers=self.webpackChunkwebpackNumbers||[]).push([[6478],{8967:(e,t,n)=>{n.d(t,{T:()=>i});const i=(e,t=!0)=>{if(Array.isArray(e)){let n=(t?"<style>#swal2-validation-message{\n  display: flex !important;\n  justify-content: flex-start !important;\n  font-weight: 600 !important;\n}#swal2-validation-message>ul{list-style: inside !important; margin: 0 !important;}</style>":"")+"<ul>";return e.forEach((e=>{n+="string"==typeof e?`<li>${e}</li>\n`:`<li>${e.error}</li>\n`})),n+="</ul>"}throw new Error("Unknown error response format")}},4108:(e,t,n)=>{n.d(t,{B:()=>c});var i=n(771),o=n(7270),a=n(7052),r=n(1942),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};const d=(e,t,n)=>s(void 0,void 0,void 0,(function*(){const s=i.t.URLS.AKWAABA_API_BASE_URL+"clients/login-id",d=n,c=JSON.stringify({email:e,id:t});yield(0,o.d)(s,{method:"POST",body:c},!0).then((e=>{if(e.jsonData.token){const t=(0,a.h)(String(e.jsonData.token));(0,r.Ad)(d,t,10),(0,r.vh)(d+"_date",(new Date).toUTCString(),10)}}))})),c=(e,t,n)=>s(void 0,void 0,void 0,(function*(){const c=(0,a.h)(String(t)),l=n;window.supersecret={unknowable:{ops:{email:e,id:c,cookieName:l}}},""==(0,r.Hl)(l)?yield d(e,c,n):yield((e,t,n)=>s(void 0,void 0,void 0,(function*(){const c=i.t.URLS.AKWAABA_API_BASE_URL+"clients/verify-token",l=n,u=(0,r.Hl)(l),p=JSON.stringify({token:(0,a.t)(u)});if((e=>{const t=new Date;return Math.abs(e.getTime()-t.getTime())/36e5<24})(new Date((0,r.Hl)(l+"_date"))))return u;yield(0,o.d)(c,{method:"POST",body:p},!0).then((i=>s(void 0,void 0,void 0,(function*(){if(i.jsonData.token&i.jsonData.user&i.jsonData.expiry){const e=(0,a.h)(String(i.jsonData.token));(0,r.Ad)(l,e,10),(0,r.vh)(l+"_date",(new Date).toUTCString(),10)}else yield d(e,t,n)}))))})))(e,c,n)}))},4672:(e,t,n)=>{n.d(t,{Jx:()=>o,O1:()=>i,Vc:()=>a,W3:()=>r});const i=()=>{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())},o=e=>{const t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());let i=null;for(const t in n)t===e&&(i=n[t]);return i},a=e=>new URLSearchParams(window.location.search).getAll(e),r=e=>{let t="",n=0;for(const i in e)n+=1,t+=`${n>1?"&":""}${i}=${e[i]}`;return t}},9474:(e,t,n)=>{n.d(t,{Pu:()=>o,Ro:()=>s,n7:()=>a,v9:()=>r,wB:()=>i});class i{static fromJson(e){const t=new i;return t.id=e.id,t.meetingEventId=o.fromJson(e.meetingEventId),t.memberCategoryId=s.fromJson(e.memberCategoryId),t.updatedBy=e.updatedBy,t.updateDate=new Date(e.updateDate),t.date=new Date(e.date),t}toJson(){return{id:this.id,meetingEventId:this.meetingEventId.toJson(),memberCategoryId:this.memberCategoryId.toJson(),updatedBy:this.updatedBy,updateDate:this.updateDate.toISOString(),date:this.date.toISOString()}}toString(){return JSON.stringify(this.toJson(),null,2)}}class o{static fromJson(e){if(!Number.isNaN(e))return e;const t=new o;return t.id=e.id,t.type=e.type,t.memberType=e.memberType,t.name=e.name,t.clientId=r.fromJson(e.clientId),t.branchId=a.fromJson(e.branchId),t.memberCategoryId=s.fromJson(e.memberCategoryId),t.meetingSpan=e.meetingSpan,t.startTime=e.startTime,t.closeTime=e.closeTime,t.latenessTime=e.latenessTime,t.isRecuring=e.isRecuring,t.hasBreakTime=e.hasBreakTime,t.hasDuty=e.hasDuty,t.hasOvertime=e.hasOvertime,t.virtualMeetingLink=e.virtualMeetingLink,t.virtualMeetingType=e.virtualMeetingType,t.meetingLocation=e.meetingLocation,t.expectedMonthlyAttendance=e.expectedMonthlyAttendance,t.activeMonthlyAttendance=e.activeMonthlyAttendance,t.agenda=e.agenda,t.agendaFile=e.agendaFile,t.updatedBy=e.updatedBy,t.updateDate=new Date(e.updateDate),t.date=new Date(e.date),t.meetingCategories=e.meetingCategories.map((e=>p.fromJson(e))),t}toJson(){return{id:this.id,type:this.type,memberType:this.memberType,name:this.name,clientId:this.clientId.toJson(),branchId:this.branchId.toJson(),memberCategoryId:this.memberCategoryId.toJson(),meetingSpan:this.meetingSpan,startTime:this.startTime,closeTime:this.closeTime,latenessTime:this.latenessTime,isRecuring:this.isRecuring,hasBreakTime:this.hasBreakTime,hasDuty:this.hasDuty,hasOvertime:this.hasOvertime,virtualMeetingLink:this.virtualMeetingLink,virtualMeetingType:this.virtualMeetingType,meetingLocation:this.meetingLocation,expectedMonthlyAttendance:this.expectedMonthlyAttendance,activeMonthlyAttendance:this.activeMonthlyAttendance,agenda:this.agenda,agendaFile:this.agendaFile,updatedBy:this.updatedBy,updateDate:this.updateDate.toISOString(),date:this.date.toISOString(),meetingCategories:this.meetingCategories.map((e=>e.toJson()))}}toString(){return JSON.stringify(this.toJson(),null,2)}}class a{static fromJson(e){const t=new a;return t.id=e.id,t.name=e.name,t.accountId=e.accountId,t.createdBy=e.createdBy,t.creationDate=new Date(e.creationDate),t.updatedBy=e.updatedBy,t.updateDate=new Date(e.updateDate),t}toJson(){return{id:this.id,name:this.name,accountId:this.accountId,createdBy:this.createdBy,creationDate:this.creationDate.toISOString(),updatedBy:this.updatedBy,updateDate:this.updateDate.toISOString()}}toString(){return JSON.stringify(this.toJson(),null,2)}}class r{static fromJson(e){console.log({"json-json--json---json":e});const t=new r;return t.id=e.id,t.name=e.name,t.accountType=e.accountType,t.country=e.country,t.stateProvince=e.stateProvince,t.applicantFirstname=e.applicantFirstname,t.applicantSurname=e.applicantSurname,t.applicantGender=e.applicantGender,t.applicantPhone=e.applicantPhone,t.applicantEmail=e.applicantEmail,t.applicantDesignationRole=e.applicantDesignationRole,t.region=e.region,t.district=e.district,t.constituency=e.constituency,t.community=e.community,t.subscriptionDuration=e.subscriptionDuration,t.subscriptionDate=new Date(e.subscriptionDate),t.subscriptionFee=e.subscriptionFee,t.logo=e.logo,t.status=e.status,t.archive=e.archive,t.accountCategory=s.fromJson(e.accountCategory),t.website=e.website,t.creationDate=new Date(e.creationDate),t.updatedBy=e.updatedBy,t.updateDate=new Date(e.updateDate),t.subscriptionInfo=c.fromJson(e.subscriptionInfo),t.countryInfo=e.countryInfo.map((e=>d.fromJson(e))),t}toJson(){return{id:this.id,name:this.name,accountType:this.accountType,country:this.country,stateProvince:this.stateProvince,applicantFirstname:this.applicantFirstname,applicantSurname:this.applicantSurname,applicantGender:this.applicantGender,applicantPhone:this.applicantPhone,applicantEmail:this.applicantEmail,applicantDesignationRole:this.applicantDesignationRole,region:this.region,district:this.district,constituency:this.constituency,community:this.community,subscriptionDuration:this.subscriptionDuration,subscriptionDate:this.subscriptionDate.toISOString(),subscriptionFee:this.subscriptionFee,logo:this.logo,status:this.status,archive:this.archive,accountCategory:this.accountCategory.toJson(),website:this.website,creationDate:this.creationDate.toISOString(),updatedBy:this.updatedBy,updateDate:this.updateDate.toISOString(),subscriptionInfo:this.subscriptionInfo.toJson(),countryInfo:this.countryInfo.map((e=>e.toJson()))}}toString(){return JSON.stringify(this.toJson(),null,2)}}class s{static fromJson(e){const t=new s;return t.id=e.id,t.clientId=Number.isNaN(e.clientId)?r.fromJson(e.clientId):Number(e.clientId),t.category=e.category,t.createdBy=e.createdBy,t.updatedBy=e.updatedBy,t.updateDate=e.updateDate?new Date(e.updateDate):null,t.date=e.date?new Date(e.date):null,t}toJson(){return{id:this.id,clientId:Number.isNaN(this.clientId)?this.clientId.toJson():this.clientId,category:this.category,createdBy:this.createdBy,updatedBy:this.updatedBy,updateDate:this.updateDate?this.updateDate.toISOString():null,date:this.date?this.date.toISOString():null}}toString(){return JSON.stringify(this.toJson(),null,2)}}class d{static fromJson(e){const t=new d;return t.id=e.id,t.name=e.name,t.short=e.short,t.code=e.code,t}toJson(){return{id:this.id,name:this.name,short:this.short,code:this.code}}toString(){return JSON.stringify(this.toJson(),null,2)}}class c{static fromJson(e){const t=new c;return t.id=e.id,t.client=e.client,t.client_id=e.client_id,t.subscription_id=e.subscription_id,t.subscribed_modules=l.fromJson(e.subscribed_modules),t.date_created=new Date(e.date_created),t}toJson(){return{id:this.id,client:this.client,client_id:this.client_id,subscription_id:this.subscription_id,subscribed_modules:this.subscribed_modules.toJson(),date_created:this.date_created.toISOString()}}toString(){return JSON.stringify(this.toJson(),null,2)}}class l{static fromJson(e){const t=new l;return t["Module 1"]=u.fromJson(e["Module 1"]),t["Module 2"]=u.fromJson(e["Module 2"]),t}toJson(){return{"Module 1":this["Module 1"].toJson(),"Module 2":this["Module 2"].toJson()}}toString(){return JSON.stringify(this.toJson(),null,2)}}class u{static fromJson(e){const t=new u;return t.module_id=e.module_id,t.module_name=e.module_name,t.expires_on=new Date(e.expires_on),t.amount_paid=e.amount_paid,t}toJson(){return{module_id:this.module_id,module_name:this.module_name,expires_on:this.expires_on.toISOString(),amount_paid:this.amount_paid}}toString(){return JSON.stringify(this.toJson(),null,2)}}class p{static fromJson(e){const t=new p;return t.id=e.id,t.meetingEventId=e.meetingEventId,t.memberCategoryId=s.fromJson(e.memberCategoryId),t.updatedBy=e.updatedBy,t.updateDate=new Date(e.updateDate),t.date=new Date(e.date),t}toJson(){return{id:this.id,meetingEventId:this.meetingEventId,memberCategoryId:this.memberCategoryId.toJson(),updatedBy:this.updatedBy,updateDate:this.updateDate.toISOString(),date:this.date.toISOString()}}toString(){return JSON.stringify(this.toJson(),null,2)}}},6883:(e,t,n)=>{var i,o=n(5862),a=n(8393),r=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let d=class extends o.oi{constructor(){super(),this.randomID1=Math.floor(12345*Math.random()),this.randomID2=Math.floor(678910*Math.random()),this.ID="datatable"}set init(e){let t=this._init;this._init=e,console.log("public set init",{oldVal:t,value:e}),this.requestUpdate("init",t)}get init(){return this._init}connectedCallback(){super.connectedCallback(),this.ID=this.randomID1+"-"+this.ID+"-"+this.randomID2}disconnectedCallback(){}render(){return o.dy`
    <table  class="align-middle mb-0 table table-borderless table-striped table-hover" style="width:100%" datatable="${this.ID}">
      <thead>
        <tr>
          ${this.thead()}
        </tr>
      </thead>
      <tbody>
          ${this.tbody()}
      </tbody>
      <tfoot>
        <tr>
          ${this.tfoot()}
        </tr>
      </tfoot>
    </table>
  `}thead(){return o.dy`
      ${this.dt_head.map((e=>o.dy`<th>${e.title}</th>`))}
    `}tbody(){return o.dy`
      ${this.dt_body.map((e=>o.dy`<tr>${e.map((e=>o.dy`<td>${e.title}</td>`))}</tr>`))}
    `}tfoot(){return o.dy`
    ${this.dt_foot.map((e=>o.dy`<th>${e.title}</th>`))}
    `}firstUpdated(){const e=this.querySelector('[datatable="'+this.ID+'"]');if("object"==typeof this.datatable.ajax){let e=this.datatable.ajax;e.headers={"Access-Control-Allow-Origin":"*/*",Accept:"application/json, text/plain, */*"};let t=e.headers;for(const e in this.ajaxHeader)if(Object.prototype.hasOwnProperty.call(this.ajaxHeader,e)){const n=this.ajaxHeader[e];t[e]=n}e.headers=t,this.datatable.ajax=e}$(e).DataTable(this.datatable)}createRenderRoot(){return this}};d.styles=[o.iv`
      :host { display: block; }
      input, select {
        box-shadow: 0 0 0 1px !important;
        padding: 2.5px !important;
        margin: 2.5px !important;
      }
    `],r([(0,a.Cb)({type:Number}),s("design:type",Number)],d.prototype,"randomID1",void 0),r([(0,a.Cb)({type:Number}),s("design:type",Number)],d.prototype,"randomID2",void 0),r([(0,a.Cb)({type:String}),s("design:type",String)],d.prototype,"ID",void 0),r([(0,a.Cb)({type:Object}),s("design:type","function"==typeof(i="undefined"!=typeof DataTables_Settings_I&&DataTables_Settings_I)?i:Object)],d.prototype,"datatable",void 0),r([(0,a.Cb)({type:Array}),s("design:type",Array)],d.prototype,"dt_head",void 0),r([(0,a.Cb)({type:Array}),s("design:type",Array)],d.prototype,"dt_foot",void 0),r([(0,a.Cb)({type:Array}),s("design:type",Array)],d.prototype,"dt_body",void 0),r([(0,a.Cb)(),s("design:type",Object)],d.prototype,"ajaxHeader",void 0),d=r([(0,a.Mo)("datatables-new"),s("design:paramtypes",[])],d)},8307:(e,t,n)=>{n.r(t),n.d(t,{AttendanceSetupViewCategories:()=>M}),n(3683),n(1877);var i,o,a=n(5248),r=(n(2169),n(4657),n(4108)),s=n(5862),d=n(8393),c=(n(934),n(6811),n(6883),n(4672)),l=(n(5866),n(771)),u=n(3600),p=n(9474),h=n(6455),m=n.n(h),y=n(7270),g=n(596),f=n(8967),b=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))},v=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},w=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let _=class extends s.oi{constructor(){super(),this.CLIENT_ID=0,this._data=[],this.urlQueryParams=void 0,this.meetingEventId=0}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return C(this,void 0,void 0,(function*(){e.connectedCallback.call(this),this.urlQueryParams=(0,c.O1)(),this.getMeetingEventId()}))}disconnectedCallback(){}render(){return s.dy`${this.schedule}`}get schedule(){return s.dy`${this.table}`}firstUpdated(){}get __tableHeaders(){return[{title:"Schedule"},{title:"Type"}]}get __tableBody(){return[]}get __tableFoot(){return[{title:"Category"},{title:"Action"}]}get table(){const e=this.__dataTable();let t={};const n=(0,u.Ie)();return t.Authorization="Token "+n.token,s.dy`
      <datatables-new .datatable="${e}" .ajaxHeader="${t}"  .dt_body="${this.__tableBody}"
        .dt_foot="${this.__tableFoot}" .dt_head="${this.__tableHeaders}"></datatables-new>
    `}__dataTable(){const e=this;return{order:[[0,"desc"]],processing:!0,serverSide:!0,ajax:{url:l.t.URLS.AKWAABA_API_BASE_URL+"attendance/meeting-event/category?datatable_plugin&meetingEventId="+this.meetingEventId,dataSrc:"data",apiType:"akwaabaApp"},columns:[{data:"id",render:(t,n,i)=>e.renderRow1Info(t,n,i),orderable:!0},{data:"meetingEventId",render:(t,n,i)=>e.renderRow2Info(t,n,i),orderable:!0}],columnDefs:[{targets:["_all"],className:"mdc-data-table__cell",checkboxes:{selectRow:!0}}],lengthMenu:[10,25,50,100,500,1e3],drawCallback:function(t){return C(this,void 0,void 0,(function*(){t.aoData,e.removeCategoryBtns()}))},responsive:!0,dom:"Blfrtip",buttons:["selected","selectedSingle","selectAll","selectNone","selectRows","selectColumns","selectCells","pdf","excel","copy","csv"],select:!0}}renderRow1Info(e,t,n){const i=p.wB.fromJson(n);return`\n      <div>\n        <h2 class="text-1xl font-bold">${i.memberCategoryId.category}</h2>\n        <li>${i.meetingEventId.name}</li>\n      </div>\n    `}renderRow2Info(e,t,n){return`\n      <div>\n        <mwc-button class="ml-1 danger" raised delete-this-item="${p.wB.fromJson(n).id}" >\n          <mwc-icon class="mr-1">delete_forever</mwc-icon>\n        </mwc-button>\n      </div>\n    `}removeCategoryBtns(){const e="delete-this-item";document.querySelectorAll("["+e+"]").forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault(),this.removeCategoryAction(t,e,n)}))}))}removeCategoryAction(e,t,n){return C(this,void 0,void 0,(function*(){n.preventDefault();const i=e.getAttribute(t);Number.isNaN(i)||0===Number(i)||(yield function(e){return b(this,void 0,void 0,(function*(){const t=(0,u.Ie)(),n=l.t.URLS.AKWAABA_API_BASE_URL+"attendance/meeting-event/category/"+e,i={};return m().fire({title:"Remove Category?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>b(this,void 0,void 0,(function*(){return yield(0,y.d)(n,{method:"DELETE",body:JSON.stringify(i),headers:{Authorization:"Token "+t.token}},!1).then((e=>{try{const t=new g.H("delete",e,!1),n=t.response;if("nameError"in n&&"unknownError"in n&&n.unknownError.length>0){let e=[];n.unknownError.forEach((t=>{t.errors.forEach((t=>{e.push({error:t})}))}));const t=(0,f.T)(e);m().showValidationMessage(`${t}`)}return t}catch(t){console.error({error:t});let n=e;n.error=t;const i=new g.H("delete",n,!0);return i.postForm,i}})).catch((e=>{m().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!m().isLoading()}).then((e=>{if(e.isConfirmed){let t="Success",n=!1;const i=e.value;if(i instanceof Object){const e=i.response;t=String(e.message),n=i.response.success}m().fire({title:t,icon:n?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),n&&setTimeout((()=>{window.location.reload()}),500)}}))}))}(Number(i)))}))}getMeetingEventId(){let e=(0,c.Jx)("meeting-event-id"),t=null!==e?Number(e):null;this.meetingEventId=Number.isNaN(t)?null:t}createRenderRoot(){return this}};_.styles=[s.iv`
   :host { display: block; }
  `],v([(0,d.Cb)({type:Number}),w("design:type",Number)],_.prototype,"CLIENT_ID",void 0),v([(0,d.Cb)({type:Array}),w("design:type","function"==typeof(i="undefined"!=typeof Array&&Array)?i:Object)],_.prototype,"_data",void 0),v([(0,d.Cb)({type:Object}),w("design:type",Object)],_.prototype,"urlQueryParams",void 0),v([(0,d.Cb)({type:Number}),w("design:type",Number)],_.prototype,"meetingEventId",void 0),v([(0,d.IO)('[show-adminField="all"]'),w("design:type","function"==typeof(o="undefined"!=typeof Element&&Element)?o:Object)],_.prototype,"showAdminFieldAllSelector",void 0),_=v([(0,d.Mo)("assigned-categories"),w("design:paramtypes",[])],_);var I,S,A=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))},D=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))},k=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},B=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let x=class extends s.oi{constructor(){super(),this.CLIENT_ID=0,this._data=[],this.urlQueryParams=void 0,this.meetingEventId=0}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return O(this,void 0,void 0,(function*(){e.connectedCallback.call(this),this.urlQueryParams=(0,c.O1)(),this.getMeetingEventId()}))}disconnectedCallback(){}render(){return s.dy`${this.schedule}`}get schedule(){return s.dy`${this.table}`}firstUpdated(){}get __tableHeaders(){return[{title:"Schedule"},{title:"Type"}]}get __tableBody(){return[]}get __tableFoot(){return[{title:"Category"},{title:"Action"}]}get table(){const e=this.__dataTable();let t={};const n=(0,u.Ie)();return t.Authorization="Token "+n.token,s.dy`
      ${this.table_header}
      <datatables-new .datatable="${e}" .ajaxHeader="${t}"  .dt_body="${this.__tableBody}"
        .dt_foot="${this.__tableFoot}" .dt_head="${this.__tableHeaders}"></datatables-new>
    `}get table_header(){return s.dy`
      <div class="flex-col p-2 mb-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-flow-row gap-4 pb-5">
        <div
          class="rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col p-2 border-b-2 mb-2">
          <label class="flex justify-between items-center">
            <b>CHECK ALL: </b>
            <input id="add_categories_all" name="add_categories_all" type="checkbox"
              class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
              @change="${this.check_all_categories}" />
          </label>
        </div>
        <div
          class="rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col p-2 border-b-2 mb-2">
          <mwc-button class="success" raised add_categories_all="activate" @click="${this.activateMultipleMemberAction}">
            Add All Selected</mwc-button>
        </div>
      </div>
    `}__dataTable(){const e=this;return{order:[[0,"desc"]],processing:!0,serverSide:!0,ajax:{url:l.t.URLS.AKWAABA_API_BASE_URL+"attendance/meeting-event/category/unassigned/"+this.meetingEventId+"?datatable_plugin",dataSrc:"data",apiType:"akwaabaApp"},columns:[{data:"id",render:(t,n,i)=>e.renderRow1Info(t,n,i),orderable:!0},{data:"category",render:(t,n,i)=>e.renderRow2Info(t,n,i),orderable:!0}],columnDefs:[{targets:["_all"],className:"mdc-data-table__cell",checkboxes:{selectRow:!0}}],lengthMenu:[10,25,50,100,500,1e3],drawCallback:function(t){return O(this,void 0,void 0,(function*(){t.aoData,e.addCategoryBtns()}))},responsive:!1,dom:"Blfrtip",buttons:["selected","selectedSingle","selectAll","selectNone","selectRows","selectColumns","selectCells","pdf","excel","copy","csv"],select:!0}}renderRow1Info(e,t,n){const i=p.Ro.fromJson(n);return`\n      <div class="flex items-center whitespace-normal mb-0">\n        <div class="pr-3">\n          <input id="category_info" name="category_info" type="checkbox" value="${i.id}"\n            class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" />\n        </div>\n        <div>\n          <h2 class="text-1xl font-bold">${i.category}</h2>\n          <li>category..name</li>\n        </div>\n      </div>\n    `}renderRow2Info(e,t,n){return`\n      <div>\n        <mwc-button class="ml-1 success text-center" raised add-this-item="${p.Ro.fromJson(n).id}" >\n           <mwc-icon class="mr-1 text-center">add</mwc-icon> <span class="text-center">Add</span>\n        </mwc-button>\n      </div>\n    `}check_all_categories(e){return O(this,void 0,void 0,(function*(){e.preventDefault(),document.querySelectorAll('[id="add_categories_all"][name="add_categories_all"]').forEach((e=>{e.checked?document.querySelectorAll('[id="category_info"][name="category_info"]').forEach((e=>{e.checked=!0})):document.querySelectorAll('[id="category_info"][name="category_info"]').forEach((e=>{e.checked=!1}))}))}))}activateMultipleMemberAction(e){return O(this,void 0,void 0,(function*(){e.preventDefault();let t=[];document.querySelectorAll('[id="category_info"][name="category_info"]').forEach((e=>{if(e.checked&&!Number.isNaN(e.value)){const n=Number(e.value);t.includes(n)||t.push(n)}})),yield function(e,t){return D(this,void 0,void 0,(function*(){const n=(0,u.Ie)(),i=l.t.URLS.AKWAABA_API_BASE_URL+"attendance/meeting-event/category/bulk",o=t.map((t=>({meetingEventId:e,memberCategoryId:t})));return m().fire({title:"Add Categories?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>D(this,void 0,void 0,(function*(){return yield(0,y.d)(i,{method:"POST",body:JSON.stringify(o),headers:{Authorization:"Token "+n.token}},!0,!1).then((e=>{try{const t=new g.H("post",e,!1),n=t.response;if("nameError"in n&&"unknownError"in n&&n.unknownError.length>0){let e=[];n.unknownError.forEach((t=>{t.errors.forEach((t=>{e.push({error:t})}))}));const t=(0,f.T)(e);m().showValidationMessage(`${t}`)}return t}catch(t){console.error({error:t});let n=e;n.error=t;const i=new g.H("post",n,!0);return i.postForm,i}})).catch((e=>{m().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!m().isLoading()}).then((e=>{if(e.isConfirmed){let t="Success",n=!1;const i=e.value;if(i instanceof Object){const e=i.response;t=String(e.message),n=i.response.success}m().fire({title:t,icon:n?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),n&&setTimeout((()=>{window.location.reload()}),500)}}))}))}(this.meetingEventId,t)}))}addCategoryBtns(){const e="add-this-item";document.querySelectorAll("["+e+"]").forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault(),this.addCategoryAction(t,e,n)}))}))}addCategoryAction(e,t,n){return O(this,void 0,void 0,(function*(){n.preventDefault();const i=e.getAttribute(t);Number.isNaN(i)||0===Number(i)||(yield function(e,t){return A(this,void 0,void 0,(function*(){const n=(0,u.Ie)(),i=l.t.URLS.AKWAABA_API_BASE_URL+"attendance/meeting-event/category",o={meetingEventId:e,memberCategoryId:t};return m().fire({title:"Add Category?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>A(this,void 0,void 0,(function*(){return yield(0,y.d)(i,{method:"POST",body:JSON.stringify(o),headers:{Authorization:"Token "+n.token}},!0).then((e=>{try{const t=new g.H("post",e,!1),n=t.response;if("nameError"in n&&"unknownError"in n&&n.unknownError.length>0){let e=[];n.unknownError.forEach((t=>{t.errors.forEach((t=>{e.push({error:t})}))}));const t=(0,f.T)(e);m().showValidationMessage(`${t}`)}return t}catch(t){console.error({error:t});let n=e;n.error=t;const i=new g.H("delete",n,!0);return i.postForm,i}})).catch((e=>{m().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!m().isLoading()}).then((e=>{if(e.isConfirmed){let t="Success",n=!1;const i=e.value;if(i instanceof Object){const e=i.response;t=String(e.message),n=i.response.success}m().fire({title:t,icon:n?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),n&&setTimeout((()=>{window.location.reload()}),500)}}))}))}(this.meetingEventId,Number(i)))}))}getMeetingEventId(){let e=(0,c.Jx)("meeting-event-id"),t=null!==e?Number(e):null;this.meetingEventId=Number.isNaN(t)?null:t}createRenderRoot(){return this}};x.styles=[s.iv`
   :host { display: block; }
  `],k([(0,d.Cb)({type:Number}),B("design:type",Number)],x.prototype,"CLIENT_ID",void 0),k([(0,d.Cb)({type:Array}),B("design:type","function"==typeof(I="undefined"!=typeof Array&&Array)?I:Object)],x.prototype,"_data",void 0),k([(0,d.Cb)({type:Object}),B("design:type",Object)],x.prototype,"urlQueryParams",void 0),k([(0,d.Cb)({type:Number}),B("design:type",Number)],x.prototype,"meetingEventId",void 0),k([(0,d.IO)('[show-adminField="all"]'),B("design:type","function"==typeof(S="undefined"!=typeof Element&&Element)?S:Object)],x.prototype,"showAdminFieldAllSelector",void 0),x=k([(0,d.Mo)("unassigned-categories"),B("design:paramtypes",[])],x);var E,J,N=n(9665),R=n(8092),T=n(1302),j=n(7108),P=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},$=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let M=class extends s.oi{constructor(){super(),this._hasSetup=!1,this._pageButtonCatess=!1,this.formId=1}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return t=this,n=void 0,o=function*(){e.connectedCallback.call(this),(0,N.f)().then((()=>this._hasSetup=!0)),yield(0,r.B)(this.email,this.mId,"client_tokenLogin"),document.onreadystatechange=e=>{"complete"==document.readyState&&this.handleQueryParam()}},new((i=void 0)||(i=Promise))((function(e,a){function r(e){try{d(o.next(e))}catch(e){a(e)}}function s(e){try{d(o.throw(e))}catch(e){a(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,s)}d((o=o.apply(t,n||[])).next())}));var t,n,i,o}disconnectedCallback(){}render(){var e;if(this._hasSetup){if(null===(e=(0,R.H)())||void 0===e?void 0:e.expiration_date.expired)return s.dy`<account-expired-component></account-expired-component>`;if(this._pageButtonCatess=(0,T.OR)(j.W.schedule_meeting_event),!(0,T.H)({pageId:j.W.schedule_meeting_event,viewType:"View"},!1))return s.dy`<no-page-entry-component></no-page-entry-component>`}return s.dy`
      <div class="shadow bg-white p-2 my-2">
        <div class="main-container">
          <div class="md:hidden block">
            <mwc-tab-bar activeIndex="${"assigned"==this.getCurrentTabFromQueryParam?0:1}">
              <mwc-tab stacked isMinWidthIndicator isFadingIndicator minWidth icon="check" id="assignedCatBtn"
                label="Categories" @click="${this.displayAssignedCategories}"></mwc-tab>
              <mwc-tab stacked isMinWidthIndicator isFadingIndicator minWidth icon="close" id="unassignedCatBtn"
                label="Categories" @click="${this.displayUnassignedCategories}"></mwc-tab>
            </mwc-tab-bar>
          </div>
          <div class="md:block hidden">
            <mwc-tab-bar activeIndex="${"assigned"==this.getCurrentTabFromQueryParam?0:1}">
              <mwc-tab stacked isMinWidthIndicator isFadingIndicator minWidth icon="check" id="assignedCatBtn"
                label="Assigned Categories" @click="${this.displayAssignedCategories}"></mwc-tab>
              <mwc-tab stacked isMinWidthIndicator isFadingIndicator minWidth icon="close" id="unassignedCatBtn"
                label="Unassigned Categories" @click="${this.displayUnassignedCategories}"></mwc-tab>
            </mwc-tab-bar>
          </div>
          <hr class="mt-3 mb-2"/>
          <div class="p-2">
            ${this.getDisplay}
          </div>
        </div>
      </div>
    `}get getCurrentTabFromQueryParam(){return new URLSearchParams(window.location.search).get("view")}handleQueryParam(){const e=this.getCurrentTabFromQueryParam;"assigned"===e?this.displayAssignedCategories(new Event("click")):"unassigned"===e&&this.displayUnassignedCategories(new Event("click"))}updateQueryParam(e){const t=new URLSearchParams(window.location.search);t.set("view",e);const n=`${window.location.pathname}?${t.toString()}`;window.history.replaceState(null,"",n)}displayAssignedCategories(e){e.preventDefault(),this.formId=1,this.unassignedCatBtn.removeAttribute("raised"),this.unassignedCatBtn.removeAttribute("active"),this.updateQueryParam("assigned")}displayUnassignedCategories(e){e.preventDefault(),this.formId=2,this.unassignedCatBtn.click(),this.assignedCatBtn.removeAttribute("raised"),this.assignedCatBtn.removeAttribute("active"),console.log({"this.unassignedCatBtn":this.unassignedCatBtn}),this.updateQueryParam("unassigned")}get getDisplay(){return 1===this.formId?s.dy`
        <assigned-categories class="mt-2" form-id="1"></assigned-categories>
      `:s.dy`
        <unassigned-categories class="mt-2" form-id="2" ></unassigned-categories>
      `}firstUpdated(){}createRenderRoot(){return this}};P([(0,d.Cb)({type:String}),$("design:type",String)],M.prototype,"email",void 0),P([(0,d.Cb)({type:Number}),$("design:type",Number)],M.prototype,"mId",void 0),P([(0,d.Cb)({type:Number}),$("design:type",Number)],M.prototype,"clientId",void 0),P([(0,d.Cb)({type:Boolean}),$("design:type",Boolean)],M.prototype,"_hasSetup",void 0),P([(0,d.Cb)({type:Boolean}),$("design:type",Boolean)],M.prototype,"_pageButtonCatess",void 0),P([(0,d.IO)("#assignedCatBtn"),$("design:type","function"==typeof(E=void 0!==a.z&&a.z)?E:Object)],M.prototype,"assignedCatBtn",void 0),P([(0,d.IO)("#unassignedCatBtn"),$("design:type","function"==typeof(J=void 0!==a.z&&a.z)?J:Object)],M.prototype,"unassignedCatBtn",void 0),P([(0,d.Cb)({type:Number}),$("design:type",Number)],M.prototype,"formId",void 0),M=P([(0,d.Mo)("attendance-setup-view-categories"),$("design:paramtypes",[])],M)}},e=>(e.O(0,[5744,2185,9674,8820,1828,4351,1109,6236,6069,214,7719,3901,3712],(()=>(8307,e(e.s=8307)))),e.O())])));
//# sourceMappingURL=categories.js.map